<!DOCTYPE html>
<html lang="en">
<head>
  <title>Insert Message</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>

<nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="home.html">GetMessage.AI</a>
      </div>
      <ul class="nav navbar-nav">
        <li class="active"><a href="add_message.html">Add New Message</a></li>
        <li><a href="results.html">Messages</a></li>
        <li><a href="edit_result.html">Edit Message</a></li>
        <li><a href="delete_message.html">Delete Message</a></li>

      </ul>
    </div>
  </nav>
    
  <div class="container">
    <h2>AI algorithem form</h2>
    <form class="form-horizontal">
      <div class="form-group">
        <label class="control-label col-sm-2" for="text">Enter your Message: </label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="message" placeholder="message">
        </div>
        <div class="col-sm-10">
            <input type="email" class="form-control" id="author_email" placeholder="author">
          </div>
          <div class="col-sm-10">
            <input type="number" class="form-control" id="send_time_delay_minutes" placeholder="category">
          </div>
          <div class="col-sm-10">
            <input type="email" class="form-control" id="recepient_email" placeholder="recepient">
          </div>
          <div class="col-sm-10">
            <input type="number" class="form-control" id="max_retires" placeholder="max retries to send">
          </div>
      </div>
      <div class="form-group">        
        <div class="col-sm-offset-2 col-sm-10">
          <button id="submitButton" type="button" class="btn btn-default">Submit</button>
          <div class="statusOutput"></div>
        </div>
      </div>
    </form>
  </div>
  <script>
    $('#submitButton').on("click",function() {
    $.post('http://localhost:8010/proxy/create', 
    {
        "message": $('#message').val(),
        "author_email": $('#author_email').val(),
        "send_time_delay_minutes": $('#send_time_delay_minutes').val(),
        "recepient_email": $('#recepient_email').val(),
        "max_retires": $('#max_retires').val()
    }).done(
        function(resp){
            $('.statusOutput').append(resp);
        }
    );
    }); 
    </script>
  </body>